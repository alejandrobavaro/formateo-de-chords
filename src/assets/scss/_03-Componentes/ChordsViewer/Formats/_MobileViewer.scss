// src/assets/scss/_03-Componentes/ChordsViewer/Formats/_MobileViewer.scss

.mobile-viewer {
  background: white;
  width: 100%;
  min-height: 100vh;
  margin: 0 auto;
  padding: 0;
  font-family: Arial, sans-serif !important;
  position: relative;
  overflow-x: hidden;
  box-sizing: border-box;
  color: #000000;

  /* Estados */
  &.loading {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
    
    .loading-message {
      font-size: 16px;
      color: #666;
      font-style: italic;
    }
  }

  /* Header canción - COMPACTADO */
  .mobile-header {
    text-align: center;
    padding: 1.5mm 0; // Reducido de 3mm
    border-bottom: 1px solid #000;
    margin: 0;
    height: 5mm; // Reducido de 8mm
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    
    .song-title-mobile {
      margin: 0;
      color: #000;
      font-weight: 700;
      line-height: 1;
      padding: 0;
      font-size: 14px !important; // Reducido de 16px
      
      .tono-destacado {
        color: #ff3366;
        font-weight: 800;
        font-size: 12px; // Más pequeño
      }
    }
  }

  /* Visor de acordes */
  .chords-viewer {
    padding: 0;
    font-family: Arial, sans-serif !important;
    line-height: 1.1;
    margin: 0;
    height: calc(100vh - 5mm); // Ajustado por header reducido
    overflow-y: auto;
    box-sizing: border-box;
  }

  /* Columnas OPTIMIZADAS - 1 COLUMNA SIEMPRE */
  .song-columns {
    display: grid;
    margin: 0;
    padding: 0 1mm; // Reducido de 1.5mm
    height: 100%;
    box-sizing: border-box;

    /* 1 columna para mobile */
    &.columns-1 {
      grid-template-columns: 1fr;
      gap: 0.5mm; // Reducido de 1mm
      padding: 0 1.5mm; // Reducido de 2mm
      min-height: auto;
    }
  }

  .column {
    display: flex;
    flex-direction: column;
    gap: 0.1mm; // Reducido de 0.2mm
    margin: 0;
    padding: 0;
    align-items: center;
    height: 100%;
    overflow: hidden;
    box-sizing: border-box;
  }

  /* --- Títulos sección - COMPACTADOS --- */
  .section-header {
    width: 100%;
    text-align: left;
    margin: 0.5mm 0 0.3mm 0; // Reducido
    padding: 0;
    box-sizing: border-box;
  }

  .section-title {
    font-weight: 700;
    text-transform: uppercase;
    color: #000000;
    margin: 0;
    padding: 0.2mm 0.6mm; // Reducido
    display: inline-block;
    background-color: #f0f0f0;
    border-radius: 0.6mm; // Reducido
    font-size: 11px; // Reducido de 13px
  }

  /* --- Bloques de voz - COMPACTADOS --- */
  .voice-section {
    width: 100%;
    padding: 0;
    margin: 0.5mm 0; // Reducido de 0.8mm
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    
    /* Voz Ale - Rosado */
    &.voice-ale {
      background-color: #ffe6e6 !important;
      border-left: 1px solid #ff4444; // Reducido de 2px
    }
    
    /* Voz Pato - Verde */
    &.voice-pato {
      background-color: #e6ffe6 !important;
      border-left: 1px solid #44ff44; // Reducido de 2px
    }
  }

  /* --- Etiqueta voz - COMPACTADA --- */
  .voice-label-horizontal {
    width: 100%;
    text-align: left;
    padding: 0;
    margin: 0 0 0.2mm 0; // Reducido
    box-sizing: border-box;
    
    .voice-name {
      font-weight: 700;
      color: #2c3e50;
      background-color: #f0f8ff;
      border-radius: 0.3mm; // Reducido
      padding: 0 0.6mm; // Reducido
      display: inline-block;
      font-size: 10px; // Reducido de 12px
    }
  }

  .voice-content {
    display: flex;
    flex-direction: column;
    gap: 0.05mm; // Reducido de 0.1mm
    flex-grow: 1;
    min-width: 0;
    box-sizing: border-box;
    padding: 0;
  }

  /* --- Líneas canción - SUPER COMPACTAS --- */
  .song-line {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.05mm; // Reducido de 0.1mm
    margin: 0;
    min-height: auto;
    line-height: 1.05; // Reducido de 1.1
    width: 100%;
    box-sizing: border-box;
    padding: 0;
  }

  .song-line-combined {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.05mm; // Reducido de 0.1mm
    margin: 0;
    min-height: auto;
    line-height: 1.05; // Reducido de 1.1
    width: 100%;
    box-sizing: border-box;
    padding: 0;
  }

  /* --- Acordes - COMPACTOS --- */
  .chords-line {
    display: flex;
    gap: 0.6mm; // Reducido de 0.8mm
    justify-content: center;
    flex-wrap: wrap;
    margin: 0;
    padding: 0;
    width: 100%;
    box-sizing: border-box;
  }

  .chord {
    font-weight: 700;
    color: #0000ff !important;
    margin: 0;
    padding: 0;
    white-space: nowrap;
    font-size: 11px; // Reducido de 13px
  }

  /* --- Letras - COMPACTAS --- */
  .lyrics-line {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    line-height: 1.05; // Reducido de 1.1
    text-align: center;
    width: 100%;
    box-sizing: border-box;
    font-size: 11px; // Reducido de 13px
  }

  /* --- Texto secundario - COMPACTO --- */
  .text-line {
    font-style: italic;
    color: #666;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    line-height: 1;
    text-align: center;
    width: 100%;
    box-sizing: border-box;
    font-size: 10px; // Reducido de 12px
  }

  /* --- Divisores - MÁS DELGADOS --- */
  .section-divider {
    height: 0.1mm; // Reducido de 0.2mm
    background-color: #ccc;
    margin: 0.5mm 0; // Reducido de 0.8mm
    padding: 0;
    width: 100%;
    box-sizing: border-box;
  }

  /* Footer Mobile - COMPACTO */
  .mobile-footer {
    margin-top: 5px; // Reducido
    padding: 5px 8px; // Reducido
    border-top: 1px solid #e0e0e0;
    font-size: 9px; // Reducido de 11px
    color: #666;
    text-align: center;
    
    .mobile-optimization-info {
      font-weight: 600;
      background: #f0f0f0;
      padding: 2px 5px; // Reducido
      border-radius: 2px; // Reducido
      display: inline-block;
    }
  }
}

/* === MEJORAS RESPONSIVE COMPACTADAS === */

/* Mobile estándar (< 768px) */
@media (max-width: 768px) {
  .mobile-viewer {
    width: 100vw;
    height: auto;
    min-height: auto;
    
    &.columns-1 .song-columns.columns-1 {
      grid-template-columns: 1fr;
      padding: 0 2mm; // Reducido de 3mm
      gap: 0.3mm; // Reducido de 0.5mm
    }
    
    .mobile-header {
      padding: 1mm 0; // Reducido
      height: 4mm; // Reducido
      
      .song-title-mobile {
        font-size: 12px !important; // Reducido de 14px
        line-height: 1;
        
        .tono-destacado {
          font-size: 10px; // Reducido
        }
      }
    }
    
    .chords-viewer {
      height: calc(100vh - 4mm); // Ajustado
    }
    
    /* Ajustes de espaciado más compactos */
    .section-header {
      margin: 0.4mm 0 0.2mm 0; // Más reducido
    }
    
    .section-title {
      font-size: 10px; // Reducido
      padding: 0.1mm 0.4mm; // Reducido
    }
    
    .voice-section {
      margin: 0.4mm 0; // Reducido
    }
    
    .voice-label-horizontal .voice-name {
      font-size: 9px; // Reducido
    }
    
    .chord {
      font-size: 10px; // Reducido
    }
    
    .lyrics-line {
      font-size: 10px; // Reducido
      line-height: 1.03; // Más compacto
    }
    
    .text-line {
      font-size: 9px; // Reducido
    }
  }
}

/* Móviles pequeños (< 480px) - ULTRA COMPACTO */
@media (max-width: 480px) {
  .mobile-viewer {
    .song-columns.columns-1 {
      padding: 0 1mm; // Reducido de 2mm
      gap: 0.2mm; // Reducido de 0.3mm
    }
    
    .mobile-header {
      padding: 0.8mm 0; // Reducido
      height: 3.5mm; // Reducido
      
      .song-title-mobile {
        font-size: 11px !important; // Reducido de 12px
        
        .tono-destacado {
          font-size: 9px; // Reducido
        }
      }
    }
    
    .chords-viewer {
      height: calc(100vh - 3.5mm); // Ajustado
    }
    
    /* Ajustes ultra compactos para pantallas muy pequeñas */
    .section-title {
      font-size: 9px; // Reducido
      padding: 0.1mm 0.3mm; // Reducido
    }
    
    .chord {
      font-size: 9px; // Reducido
    }
    
    .lyrics-line {
      font-size: 9px; // Reducido
      line-height: 1.02; // Ultra compacto
    }
    
    .voice-label-horizontal .voice-name {
      font-size: 8px; // Reducido
      padding: 0 0.4mm; // Reducido
    }
    
    .text-line {
      font-size: 8px; // Reducido
    }
    
    .mobile-footer {
      padding: 3px 5px; // Reducido
      font-size: 8px; // Reducido
      margin-top: 3px; // Reducido
      
      .mobile-optimization-info {
        padding: 1px 3px; // Reducido
      }
    }
  }
}

/* Móviles en orientación horizontal - COMPACTO */
@media (max-width: 768px) and (orientation: landscape) {
  .mobile-viewer {
    .mobile-header {
      padding: 0.5mm 0; // Reducido
      height: 3mm; // Reducido
      
      .song-title-mobile {
        font-size: 10px !important; // Reducido
      }
    }
    
    .chords-viewer {
      height: calc(100vh - 3mm); // Ajustado
    }
    
    .song-columns.columns-1 {
      padding: 0 0.8mm; // Reducido
      gap: 0.1mm; // Reducido
    }
  }
}

/* Soporte para dispositivos con notch (iPhone X, etc) */
@supports (padding: max(0px)) {
  .mobile-viewer {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-top: max(0px, env(safe-area-inset-top));
    
    .song-columns.columns-1 {
      padding-left: max(1mm, env(safe-area-inset-left));
      padding-right: max(1mm, env(safe-area-inset-right));
    }
  }
}